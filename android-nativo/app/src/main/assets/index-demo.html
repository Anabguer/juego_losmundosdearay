<!DOCTYPE html>
<html lang="es">
<head>
  <base href="./">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, shrink-to-fit=no">
  <meta name="theme-color" content="#0e1320">
  <meta name="description" content="Los Mundos de Aray - Demo sin login">
  <link rel="icon" href="assets/img/logo.png">
  <title>ğŸŒŸ Los Mundos de Aray - Demo</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  
  <!-- Header / HUD -->
  <header class="game-header game-header-pueblo">
    <img src="assets/img/logo.png" alt="Aray" class="game-logo">
    <div class="hud-stats">
      <div class="stat-item candy-pill">
        <span class="stat-icon">ğŸ¬</span>
        <span class="stat-value" id="hud-coins">0</span>
      </div>
      
      <div class="stat-item hunger-stat hunger-bar-container">
        <span class="stat-icon">ğŸª</span>
        <div class="hunger-bar">
          <div class="hunger-bar-fill" id="hunger-bar-fill"></div>
        </div>
      </div>
      
      <button class="btn-eat" id="btn-eat">
        <img src="assets/img/comida.png" alt="Comer" class="btn-eat-icon">
      </button>
    </div>
    
    <!-- BotÃ³n de demo -->
    <button id="demo-btn" class="btn btn-primary" style="position: absolute; top: 1rem; right: 1rem; padding: 0.5rem 1rem; font-size: 0.9rem; z-index: 1000;">
      ğŸ§ª Demo
    </button>
  </header>
  
  <!-- Mapa del pueblo -->
  <main class="map-container">
    <div class="map-wrapper">
      <div id="map" class="map">
        <!-- Los tiles se generarÃ¡n dinÃ¡micamente -->
      </div>
      
      <!-- Avatar de Aray DENTRO del wrapper -->
      <div id="avatar" class="avatar"></div>
    </div>
  </main>
  
  <!-- Modal de demo -->
  <div id="demo-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content" style="max-width: 500px; text-align: center;">
      <div class="modal-header">
        <h2 style="margin: 0; color: #d900ff;">ğŸ§ª Demo del Sistema</h2>
        <button id="demo-modal-close" class="btn btn-outline" style="position: absolute; top: 1rem; right: 1rem; padding: 4px 6px; color: #d900ff; font-weight: 900; font-size: 1.2rem; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">âœ•</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1.5rem; color: #666;">Prueba las funcionalidades del sistema</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
          <button id="test-candies" class="btn btn-primary" style="padding: 1rem;">
            ğŸ¬ +10 Caramelos
          </button>
          <button id="test-level" class="btn btn-primary" style="padding: 1rem;">
            ğŸ® +1 Nivel Snake
          </button>
          <button id="test-all" class="btn btn-primary" style="padding: 1rem; grid-column: 1 / -1;">
            ğŸ§ª Test Completo
          </button>
        </div>
        
        <div id="demo-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: left; font-family: monospace; font-size: 0.9rem; max-height: 200px; overflow-y: auto;">
          <p>Resultados de las pruebas aparecerÃ¡n aquÃ­...</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script type="module">
    console.log('ğŸ§ª Cargando DEMO de Los Mundos de Aray...');
    
    // Importar mÃ³dulos bÃ¡sicos
    import { initMap } from './js/map.js';
    import { getCoins, getEnergy, addCoins } from './js/storage.js';
    import { updateHUD, initCommonUI } from './js/ui.js?v=3';
    
    // Variables de demo
    let demoCandies = 0;
    let demoLevels = {
      snake: 0,
      runner: 0,
      memory: 0
    };
    
    // FunciÃ³n para mostrar resultados
    const showResult = (message, type = 'info') => {
      const results = document.getElementById('demo-results');
      const timestamp = new Date().toLocaleTimeString();
      const color = type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3';
      
      results.innerHTML += `<p style="color: ${color}; margin: 0.2rem 0;">[${timestamp}] ${message}</p>`;
      results.scrollTop = results.scrollHeight;
    };
    
    // Funciones de demo
    const testCandies = () => {
      demoCandies += 10;
      addCoins(10);
      updateHUD();
      showResult(`âœ… +10 caramelos aÃ±adidos. Total: ${demoCandies}`, 'success');
    };
    
    const testLevel = () => {
      demoLevels.snake += 1;
      localStorage.setItem('aray_best_parque', demoLevels.snake.toString());
      showResult(`âœ… Nivel Snake actualizado: ${demoLevels.snake}`, 'success');
    };
    
    const testAll = () => {
      showResult('ğŸ§ª Iniciando test completo...', 'info');
      
      // Test caramelos
      demoCandies += 25;
      addCoins(25);
      showResult(`âœ… +25 caramelos. Total: ${demoCandies}`, 'success');
      
      // Test niveles
      demoLevels.snake += 3;
      demoLevels.runner += 2;
      demoLevels.memory += 1;
      
      localStorage.setItem('aray_best_parque', demoLevels.snake.toString());
      localStorage.setItem('aray_best_cole', demoLevels.runner.toString());
      localStorage.setItem('aray_best_pabellon', demoLevels.memory.toString());
      
      showResult(`âœ… Niveles actualizados: Snake=${demoLevels.snake}, Runner=${demoLevels.runner}, Memory=${demoLevels.memory}`, 'success');
      
      // Actualizar HUD
      updateHUD();
      
      showResult('ğŸ‰ Test completo finalizado!', 'success');
    };
    
    // Inicializar cuando el DOM estÃ© listo
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ğŸš€ Inicializando demo...');
      
      // Inicializar UI bÃ¡sica
      initCommonUI();
      updateHUD();
      initMap();
      
      // Configurar botÃ³n de demo
      const demoBtn = document.getElementById('demo-btn');
      const demoModal = document.getElementById('demo-modal');
      const demoClose = document.getElementById('demo-modal-close');
      
      demoBtn.onclick = () => {
        demoModal.style.display = 'flex';
      };
      
      demoClose.onclick = () => {
        demoModal.style.display = 'none';
      };
      
      // Configurar botones de test
      document.getElementById('test-candies').onclick = testCandies;
      document.getElementById('test-level').onclick = testLevel;
      document.getElementById('test-all').onclick = testAll;
      
      // Mostrar mensaje inicial
      showResult('ğŸ® Demo cargado correctamente. Prueba las funcionalidades!', 'success');
      
      console.log('âœ… Demo inicializado correctamente');
    });
  </script>
</body>
</html>


